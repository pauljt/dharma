%%% http://searchfox.org/mozilla-central/source/dom/webidl/Performance.webidl

%%% performance

%%% ###########################################################################

%const% VARIANCE_MAX := 50
%const% VARIANCE_TEMPLATE := "try { %s } catch (e) { }"
%const% MAX_REPEAT_POWER := 5

%%% ###########################################################################
%section% := value

bufferSize :=
	performance.setResourceTimingBufferSize("+common:intoverflow+")

methods :=
	performance.now()
	performance.getEntries()
	performance.getEntriesByType(+entryTypes+)
	performance.getEntriesByName(+markNames+, +entryTypes+)
	performance.clearResourceTimings()
	performance.setResourceTimingBufferSize("+common:intoverflow+")
	performance.mark(+markNames+)
	performance.clearMarks("+common:text+")
	performance.measure()
	performance.clearMeasures("+common:text+")
	performance.toJSON()
	!timingInfo!.toJSON()
	performance.navigation.toJSON()

markNames :=
	"mark_start"
	"mark_end"
	""

measureString :=
	+markNames+
	"mark"
	"measure"

entryTypes :=
	"frame"
	"mark"
	"measure"
	"navigation"
	"resource"
	"server"


%%% ###########################################################################
%section% := variable

entries :=
	@entries@ = performance.getEntries()

resouceEntries :=
	@resouceEntries@ = performance.getEntriesByType("resource");

timingInfo :=
	@timingInfo@ = performance.timing;

%%% ###########################################################################

%section% := variance

main :=
	+methods+
%%%	+bufferSize+

%%%	setInterval(function(){\n	%repeat%(+wrapper+, "\n	")\n}, 0);
